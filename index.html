<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>THE BUTTON</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root {
  --bg1: #04020f;
  --c1: #ff2d78;
  --c2: #00f5ff;
  --c3: #ffe94e;
  --c4: #7b2fff;
  --c5: #00ff9d;
  --glass: rgba(255,255,255,0.04);
  --glass-b: rgba(255,255,255,0.10);
  --text: #f0eaff;
  --text-dim: rgba(240,234,255,0.35);
  --text-mid: rgba(240,234,255,0.60);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden}
body{font-family:'Rajdhani',sans-serif;background:var(--bg1);display:flex;align-items:center;justify-content:center;position:relative;cursor:default;user-select:none}

/* ‚îÄ‚îÄ BACKGROUND ‚îÄ‚îÄ */
#bg{position:fixed;inset:0;z-index:0;overflow:hidden}
#bg-mesh{position:absolute;inset:0;background:
  radial-gradient(ellipse 80% 60% at 20% 10%,rgba(123,47,255,.18) 0%,transparent 60%),
  radial-gradient(ellipse 60% 50% at 80% 90%,rgba(255,45,120,.15) 0%,transparent 55%),
  radial-gradient(ellipse 50% 70% at 60% 40%,rgba(0,245,255,.08) 0%,transparent 50%),
  linear-gradient(160deg,#04020f 0%,#0a0520 50%,#060118 100%)}
#stars{position:absolute;inset:0}
#grid{position:absolute;inset:0;
  background-image:linear-gradient(rgba(0,245,255,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,245,255,.03) 1px,transparent 1px);
  background-size:60px 60px;
  mask-image:radial-gradient(ellipse 70% 70% at 50% 50%,black 30%,transparent 80%);
  animation:gridDrift 20s linear infinite}
@keyframes gridDrift{from{background-position:0 0}to{background-position:0 60px}}
.orb{position:absolute;border-radius:50%;filter:blur(80px);animation:orbFloat var(--d,12s) ease-in-out infinite alternate;opacity:.5}
@keyframes orbFloat{from{transform:translate(0,0) scale(1)}to{transform:translate(var(--tx,30px),var(--ty,20px)) scale(1.1)}}
#grain{position:fixed;inset:0;z-index:1;pointer-events:none;opacity:.04;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='256' height='256'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='256' height='256' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size:180px}

/* ‚îÄ‚îÄ STAGE ‚îÄ‚îÄ */
#stage{position:relative;z-index:10;display:flex;flex-direction:column;align-items:center;width:min(520px,95vw);gap:0}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
#header{width:100%;display:flex;align-items:center;justify-content:space-between;padding:0 4px;margin-bottom:22px}
#logo{font-family:'Orbitron',sans-serif;font-weight:900;font-size:13px;letter-spacing:6px;color:var(--c2);text-shadow:0 0 20px var(--c2),0 0 40px rgba(0,245,255,.3);text-transform:uppercase}
#instr-counter{display:flex;align-items:baseline;gap:4px}
#ic-label{font-family:'Share Tech Mono',monospace;font-size:9px;letter-spacing:3px;color:var(--text-dim);text-transform:uppercase}
#ic-num{font-family:'Orbitron',sans-serif;font-weight:900;font-size:28px;background:linear-gradient(135deg,var(--c3),var(--c1));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;filter:drop-shadow(0 0 10px rgba(255,233,78,.5));transition:transform .3s cubic-bezier(.34,1.56,.64,1);line-height:1}

.neon-line{width:100%;height:1px;background:linear-gradient(90deg,transparent,var(--c2),var(--c4),var(--c1),transparent);opacity:.4;margin-bottom:26px;position:relative}
.neon-line::after{content:'';position:absolute;inset:0;background:inherit;filter:blur(3px);opacity:.6}

/* ‚îÄ‚îÄ INSTRUCTION BOX ‚îÄ‚îÄ */
#instr-box{width:100%;background:var(--glass);border:1px solid var(--glass-b);border-radius:16px;padding:22px 30px;margin-bottom:30px;position:relative;overflow:hidden;backdrop-filter:blur(12px);min-height:140px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}
#instr-box::before,#instr-box::after{content:'';position:absolute;width:18px;height:18px;border-color:var(--c2);border-style:solid;opacity:.55}
#instr-box::before{top:8px;left:8px;border-width:2px 0 0 2px;border-radius:4px 0 0 0}
#instr-box::after{bottom:8px;right:8px;border-width:0 2px 2px 0;border-radius:0 0 4px 0}
.shimmer{position:absolute;inset:0;background:linear-gradient(105deg,transparent 40%,rgba(255,255,255,.04) 50%,transparent 60%);animation:shimmerSweep 3.5s ease-in-out infinite;pointer-events:none}
@keyframes shimmerSweep{0%{transform:translateX(-100%)}100%{transform:translateX(200%)}}
#instr-tag{font-family:'Share Tech Mono',monospace;font-size:9px;letter-spacing:4px;color:var(--c1);text-shadow:0 0 10px var(--c1);text-transform:uppercase}
#instr-text{font-family:'Orbitron',sans-serif;font-weight:700;font-size:clamp(17px,4.5vw,26px);color:var(--text);text-align:center;letter-spacing:2px;line-height:1.2;transition:opacity .15s,transform .15s;text-shadow:0 0 30px rgba(240,234,255,.12)}
#instr-text.out{opacity:0;transform:translateY(-8px) scale(.97)}
#instr-sub{font-size:13px;font-weight:300;color:var(--text-mid);letter-spacing:.5px;text-align:center;max-width:320px;line-height:1.7;transition:opacity .2s;min-height:18px}

/* Modifier pills */
#mods{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;min-height:22px}
.mpill{font-family:'Share Tech Mono',monospace;font-size:9px;letter-spacing:2px;padding:3px 10px;border-radius:20px;border:1px solid;text-transform:uppercase;animation:pillPop .4s cubic-bezier(.34,1.8,.64,1)}
@keyframes pillPop{from{opacity:0;transform:scale(.5) translateY(6px)}to{opacity:1;transform:scale(1) translateY(0)}}
.m-inv{color:#ff6040;border-color:rgba(255,96,64,.4);background:rgba(255,96,64,.08);text-shadow:0 0 8px rgba(255,96,64,.6)}
.m-spd{color:var(--c3);border-color:rgba(255,233,78,.4);background:rgba(255,233,78,.07);text-shadow:0 0 8px rgba(255,233,78,.5)}
.m-bln{color:var(--c4);border-color:rgba(123,47,255,.4);background:rgba(123,47,255,.08);text-shadow:0 0 8px rgba(123,47,255,.6)}

/* ‚îÄ‚îÄ ARENA ‚îÄ‚îÄ */
#arena{position:relative;width:250px;height:250px;display:flex;align-items:center;justify-content:center;margin-bottom:12px}
#aura{position:absolute;inset:-20px;border-radius:50%;background:radial-gradient(circle,rgba(123,47,255,.12) 0%,transparent 65%);animation:auraPulse 3s ease-in-out infinite;pointer-events:none}
@keyframes auraPulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.08);opacity:.7}}
#rot-ring{position:absolute;inset:-4px;border-radius:50%;border:1px solid transparent;background:linear-gradient(var(--bg1),var(--bg1)) padding-box,conic-gradient(var(--c2),var(--c4),var(--c1),var(--c2)) border-box;animation:ringRot 6s linear infinite;pointer-events:none}
#rot-ring2{position:absolute;inset:6px;border-radius:50%;border:1px solid transparent;background:linear-gradient(var(--bg1),var(--bg1)) padding-box,conic-gradient(var(--c1),var(--c2),var(--c4),var(--c1)) border-box;opacity:.35;animation:ringRot 10s linear infinite reverse;pointer-events:none}
@keyframes ringRot{to{transform:rotate(360deg)}}
#timer-svg{position:absolute;inset:0;width:100%;height:100%;transform:rotate(-90deg);pointer-events:none}
#t-track{fill:none;stroke:rgba(255,255,255,.06);stroke-width:3}
#t-fill{fill:none;stroke-width:3;stroke-linecap:round;stroke:url(#tGrad);filter:drop-shadow(0 0 6px rgba(0,245,255,.7))}
#tick-svg{position:absolute;inset:0;width:100%;height:100%;pointer-events:none}
.danger-state #t-fill{animation:dangerFlk .35s ease-in-out infinite}
.danger-state #aura{background:radial-gradient(circle,rgba(255,45,120,.2) 0%,transparent 65%)}
.danger-state #rot-ring{animation-duration:1.5s}
@keyframes dangerFlk{0%,100%{opacity:1}50%{opacity:.3}}
#t-num{position:absolute;bottom:-42px;left:50%;transform:translateX(-50%);font-family:'Orbitron',sans-serif;font-weight:700;font-size:14px;letter-spacing:3px;color:var(--c2);text-shadow:0 0 12px var(--c2);white-space:nowrap;transition:color .3s,text-shadow .3s,opacity .3s}
.warn-state #t-num{color:var(--c3);text-shadow:0 0 12px var(--c3)}
.warn-state #t-fill{filter:drop-shadow(0 0 8px rgba(255,233,78,.8))}
.danger-state #t-num{color:var(--c1);text-shadow:0 0 16px var(--c1);animation:dangerFlk .35s ease-in-out infinite}
#click-cnt{position:absolute;top:-38px;left:50%;transform:translateX(-50%);font-family:'Orbitron',monospace;font-size:13px;font-weight:700;letter-spacing:3px;color:var(--c3);text-shadow:0 0 12px var(--c3);white-space:nowrap;min-height:20px;text-align:center;z-index:6}

/* ‚îÄ‚îÄ BUTTON ‚îÄ‚îÄ */
#btn{width:148px;height:148px;border-radius:50%;border:none;cursor:pointer;position:relative;z-index:5;font-family:'Orbitron',sans-serif;font-weight:700;font-size:10px;letter-spacing:4px;color:#fff;text-transform:uppercase;
  background:radial-gradient(circle at 38% 30%,#3a1f7a 0%,#1a0d45 45%,#120836 100%);
  box-shadow:0 0 0 2px rgba(123,47,255,.5),0 0 30px rgba(123,47,255,.4),0 0 60px rgba(123,47,255,.15),inset 0 2px 0 rgba(255,255,255,.15),inset 0 -4px 0 rgba(0,0,0,.4),0 18px 50px rgba(0,0,0,.8);
  transition:transform .12s cubic-bezier(.34,1.56,.64,1),box-shadow .2s,background .2s;user-select:none;-webkit-user-select:none}
#btn::before{content:'';position:absolute;inset:10px;border-radius:50%;background:radial-gradient(circle at 35% 28%,rgba(255,255,255,.22) 0%,transparent 55%);pointer-events:none}
#btn::after{content:'';position:absolute;inset:0;border-radius:50%;box-shadow:inset 0 0 0 1.5px rgba(255,255,255,.1);pointer-events:none}
#btn:hover:not(:disabled){transform:translateY(-4px) scale(1.03);background:radial-gradient(circle at 38% 30%,#4f2aa0 0%,#25115e 45%,#180a48 100%);box-shadow:0 0 0 2px rgba(0,245,255,.7),0 0 30px rgba(0,245,255,.5),0 0 70px rgba(0,245,255,.2),inset 0 2px 0 rgba(255,255,255,.2),inset 0 -4px 0 rgba(0,0,0,.4),0 24px 60px rgba(0,0,0,.9)}
#btn:active:not(:disabled){transform:translateY(3px) scale(.96);box-shadow:0 0 0 2px rgba(255,45,120,.7),0 0 20px rgba(255,45,120,.5),inset 0 4px 6px rgba(0,0,0,.5),0 6px 20px rgba(0,0,0,.7)}
#btn:disabled{filter:brightness(.4) saturate(.2);cursor:not-allowed}
#btn.inv{background:radial-gradient(circle at 38% 30%,#2a0a14 0%,#150510 45%,#0a0208 100%);box-shadow:0 0 0 2px rgba(255,45,120,.5),0 0 25px rgba(255,45,120,.3),inset 0 2px 0 rgba(255,255,255,.08),inset 0 -4px 0 rgba(0,0,0,.5),0 18px 50px rgba(0,0,0,.8);color:rgba(255,45,120,.7)}
#btn.holding{background:radial-gradient(circle at 38% 30%,#001e2a 0%,#000d18 45%,#000810 100%);box-shadow:0 0 0 2px rgba(0,245,255,.8),0 0 30px rgba(0,245,255,.6),0 0 80px rgba(0,245,255,.2),inset 0 0 20px rgba(0,245,255,.06),0 8px 24px rgba(0,0,0,.7);color:var(--c2);transform:scale(.95)}
#btn.s-ok{animation:btnOk .25s ease-out forwards}
@keyframes btnOk{0%{box-shadow:0 0 0 0 rgba(0,255,157,.9),0 0 40px rgba(0,255,157,.5)}100%{box-shadow:0 0 0 40px rgba(0,255,157,0),0 0 0 rgba(0,255,157,0)}}
#btn.s-fail{animation:btnFail .3s ease forwards}
@keyframes btnFail{0%,100%{transform:translateX(0)}20%{transform:translateX(-9px)}50%{transform:translateX(9px)}80%{transform:translateX(-5px)}}

#hold-svg{position:absolute;inset:0;width:100%;height:100%;transform:rotate(-90deg);z-index:6;pointer-events:none;opacity:0;transition:opacity .2s}
#hold-svg.vis{opacity:1}
#h-track{fill:none;stroke:rgba(0,245,255,.1);stroke-width:4}
#h-fill{fill:none;stroke:var(--c2);stroke-width:4;stroke-linecap:round;filter:drop-shadow(0 0 6px rgba(0,245,255,.7))}
#blind-veil{position:absolute;inset:0;border-radius:50%;pointer-events:none;z-index:4;background:radial-gradient(circle,transparent 36%,rgba(4,2,15,.97) 65%);opacity:0;transition:opacity .5s}
#blind-veil.on{opacity:1}

/* ‚îÄ‚îÄ STATUS ‚îÄ‚îÄ */
#status-row{height:30px;display:flex;align-items:center;justify-content:center;margin-top:8px}
#status{font-family:'Orbitron',sans-serif;font-weight:700;font-size:11px;letter-spacing:4px;text-transform:uppercase;opacity:0;transition:opacity .2s}
#status.show{opacity:1}
#status.ok{color:var(--c5);text-shadow:0 0 16px var(--c5)}
#status.bad{color:var(--c1);text-shadow:0 0 16px var(--c1)}

/* ‚îÄ‚îÄ DOTS ‚îÄ‚îÄ */
#dots-row{margin-top:18px;display:flex;gap:5px;align-items:center;flex-wrap:wrap;justify-content:center;max-width:340px}
.dot{width:7px;height:7px;border-radius:50%;transition:all .35s ease}
.dot.done{background:var(--c5);box-shadow:0 0 6px var(--c5)}
.dot.fail-d{background:var(--c1);box-shadow:0 0 6px var(--c1)}
.dot.cur{background:#fff;box-shadow:0 0 8px #fff;animation:dotPulse 1s ease-in-out infinite}
.dot.fut{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.1)}
@keyframes dotPulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.7)}}

/* ‚îÄ‚îÄ MUSIC TOGGLE (header) ‚îÄ‚îÄ */
#music-toggle{
  width:28px;height:28px;border-radius:50%;
  border:1px solid rgba(255,255,255,0.12);
  background:transparent;
  color:var(--c2);font-size:13px;
  cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:all .18s ease;
  text-shadow:0 0 8px var(--c2);
  flex-shrink:0;
}
#music-toggle:hover{border-color:var(--c2);box-shadow:0 0 10px rgba(0,245,255,.35),inset 0 0 8px rgba(0,245,255,.06)}
#music-toggle.muted{color:var(--text-dim);text-shadow:none;border-color:rgba(255,255,255,.06)}

/* ‚îÄ‚îÄ OVERLAY ‚îÄ‚îÄ */
#overlay{position:fixed;inset:0;z-index:300;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .5s;background:rgba(4,2,15,.92);backdrop-filter:blur(20px)}
#overlay.show{opacity:1;pointer-events:all}
#ov-card{background:linear-gradient(145deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid var(--glass-b);border-radius:24px;padding:48px 52px;display:flex;flex-direction:column;align-items:center;gap:18px;max-width:400px;width:90%;position:relative;overflow:hidden;animation:cardIn .65s cubic-bezier(.34,1.56,.64,1) both;box-shadow:0 40px 100px rgba(0,0,0,.6),inset 0 1px 0 rgba(255,255,255,.08)}
@keyframes cardIn{from{opacity:0;transform:translateY(30px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}
#ov-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--c4),var(--c2),var(--c1));border-radius:24px 24px 0 0}
#ov-eye{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:5px;color:var(--text-dim);text-transform:uppercase}
#ov-title{font-family:'Orbitron',sans-serif;font-weight:900;font-size:clamp(44px,12vw,78px);letter-spacing:-1px;line-height:.9;text-align:center;white-space:pre-line}
.ov-win  #ov-title{color:var(--c5);text-shadow:0 0 60px rgba(0,255,157,.4),0 0 120px rgba(0,255,157,.15)}
.ov-fail #ov-title{color:var(--c1);text-shadow:0 0 60px rgba(255,45,120,.4),0 0 120px rgba(255,45,120,.15)}
.ov-divider{width:50px;height:1px;background:linear-gradient(90deg,transparent,var(--glass-b),transparent)}
#ov-reason{font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:300;color:var(--text-mid);text-align:center;letter-spacing:.5px;line-height:1.8;max-width:260px;white-space:pre-line}
#ov-score{font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:3px;color:var(--text-dim);text-transform:uppercase}
#ov-btn{font-family:'Orbitron',sans-serif;font-weight:700;font-size:11px;letter-spacing:5px;padding:14px 44px;background:linear-gradient(135deg,var(--c4),var(--c1));border:none;border-radius:6px;color:#fff;cursor:pointer;text-transform:uppercase;margin-top:6px;position:relative;overflow:hidden;box-shadow:0 0 30px rgba(255,45,120,.4);transition:all .2s}
#ov-btn::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.15),transparent);pointer-events:none}
#ov-btn:hover{transform:translateY(-2px) scale(1.03);box-shadow:0 0 40px rgba(255,45,120,.6)}

/* Sparks */
.spark{position:fixed;border-radius:50%;pointer-events:none;z-index:150;animation:sparkFly var(--d,.7s) ease-out forwards}
@keyframes sparkFly{0%{transform:translate(0,0) scale(1);opacity:1}100%{transform:translate(var(--tx),var(--ty)) scale(0);opacity:0}}

/* ‚îÄ‚îÄ START SCREEN ‚îÄ‚îÄ */
#start-screen{
  position:fixed;inset:0;z-index:400;
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:28px;
  background:rgba(4,2,15,.97);backdrop-filter:blur(20px);
  transition:opacity .6s ease;
}
#start-screen.hidden{opacity:0;pointer-events:none}
#start-logo{font-family:'Orbitron',sans-serif;font-weight:900;font-size:clamp(40px,10vw,72px);letter-spacing:4px;background:linear-gradient(135deg,var(--c2),var(--c4),var(--c1));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-align:center;animation:logoPulse 2.5s ease-in-out infinite}
@keyframes logoPulse{0%,100%{filter:drop-shadow(0 0 20px rgba(0,245,255,.4))}50%{filter:drop-shadow(0 0 40px rgba(123,47,255,.7))}}
#start-sub{font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:4px;color:var(--text-dim);text-transform:uppercase}
#start-btn{
  font-family:'Orbitron',sans-serif;font-weight:700;font-size:12px;letter-spacing:6px;
  padding:16px 52px;background:linear-gradient(135deg,var(--c4),var(--c1));
  border:none;border-radius:6px;color:#fff;cursor:pointer;text-transform:uppercase;
  box-shadow:0 0 40px rgba(255,45,120,.4),0 0 80px rgba(255,45,120,.1);
  transition:all .2s;position:relative;overflow:hidden;
  animation:startBtnPulse 2s ease-in-out infinite;
}
#start-btn::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.18),transparent);pointer-events:none}
#start-btn:hover{transform:scale(1.05);box-shadow:0 0 60px rgba(255,45,120,.6),0 0 100px rgba(255,45,120,.2)}
@keyframes startBtnPulse{0%,100%{box-shadow:0 0 40px rgba(255,45,120,.4)}50%{box-shadow:0 0 60px rgba(255,45,120,.7),0 0 100px rgba(255,45,120,.2)}}
#start-hint{font-family:'Share Tech Mono',monospace;font-size:9px;letter-spacing:3px;color:var(--text-dim);text-transform:uppercase;opacity:.6}
</style>
</head>
<body>

<!-- Background -->
<div id="bg">
  <div id="bg-mesh"></div>
  <canvas id="stars"></canvas>
  <div id="grid"></div>
  <div class="orb" style="width:400px;height:400px;background:rgba(123,47,255,.12);left:10%;top:5%;--d:14s;--tx:40px;--ty:30px"></div>
  <div class="orb" style="width:300px;height:300px;background:rgba(255,45,120,.1);right:5%;bottom:10%;--d:10s;--tx:-30px;--ty:-20px"></div>
  <div class="orb" style="width:250px;height:250px;background:rgba(0,245,255,.07);left:55%;top:60%;--d:18s;--tx:20px;--ty:-40px"></div>
</div>
<div id="grain"></div>

<!-- START SCREEN -->
<div id="start-screen">
  <div id="start-logo">THE BUTTON</div>
  <div id="start-sub">A game of obedience</div>
  <button id="start-btn">BEGIN</button>
  <div id="start-hint">click anywhere to start music</div>
</div>

<!-- Stage -->
<div id="stage">
  <div id="header">
    <div style="display:flex;align-items:center;gap:10px">
      <div id="logo">Made by Pixels Core</div>
      <button id="music-toggle" title="Toggle music">üîä</button>
    </div>
    <div id="instr-counter">
      <span id="ic-label">instruction&nbsp;</span>
      <span id="ic-num">1</span>
    </div>
  </div>
  <div class="neon-line"></div>

  <div id="instr-box">
    <div class="shimmer"></div>
    <div id="instr-tag">your task</div>
    <div id="mods"></div>
    <div id="instr-text">‚Äî</div>
    <div id="instr-sub"></div>
  </div>

  <div id="arena">
    <div id="aura"></div>
    <div id="rot-ring"></div>
    <div id="rot-ring2"></div>

    <svg id="timer-svg" viewBox="0 0 250 250">
      <defs>
        <linearGradient id="tGrad" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%"   stop-color="#00f5ff"/>
          <stop offset="50%"  stop-color="#7b2fff"/>
          <stop offset="100%" stop-color="#ff2d78"/>
        </linearGradient>
      </defs>
      <circle id="t-track" cx="125" cy="125" r="112"/>
      <circle id="t-fill"  cx="125" cy="125" r="112"/>
    </svg>

    <svg id="tick-svg" viewBox="0 0 250 250"></svg>
    <div id="click-cnt"></div>
    <button id="btn"><span id="btn-lbl">PRESS</span></button>

    <svg id="hold-svg" viewBox="0 0 148 148">
      <circle id="h-track" cx="74" cy="74" r="62"/>
      <circle id="h-fill"  cx="74" cy="74" r="62"/>
    </svg>

    <div id="blind-veil"></div>
    <div id="t-num">‚Äî</div>
  </div>

  <div id="status-row"><div id="status"></div></div>
  <div id="dots-row"></div>
</div>

<!-- Overlay -->
<div id="overlay">
  <div id="ov-card">
    <div id="ov-eye">‚Äî</div>
    <div id="ov-title">‚Äî</div>
    <div class="ov-divider"></div>
    <div id="ov-reason"></div>
    <div id="ov-score"></div>
    <button id="ov-btn">PLAY AGAIN</button>
  </div>
</div>

<!-- Background music ‚Äî place music.mp3 in the same folder as this HTML file -->
<audio id="bg-music" loop preload="auto">
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
'use strict';

(function(){
  const c=document.getElementById('stars');
  const ctx=c.getContext('2d');
  let stars=[];
  
  function resize(){
    c.width=innerWidth;
    c.height=innerHeight;
  }
  
  function init(){
    stars=[];
    for(let i=0;i<120;i++){
      stars.push({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*1.2,a:Math.random(),spd:.002+Math.random()*.006,ph:Math.random()*Math.PI*2});
    }
  }
  
  let fr=0;
  function draw(){
    ctx.clearRect(0,0,c.width,c.height);
    fr++;
    stars.forEach(s=>{
      s.a=.2+.8*(.5+.5*Math.sin(fr*s.spd+s.ph));
      ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fillStyle=`rgba(200,190,255,${s.a})`;ctx.fill();
    });
    requestAnimationFrame(draw);
  }
  resize();init();draw();
  window.addEventListener('resize',()=>{resize();init()});
})();

const R=112,CIRC=2*Math.PI*R;
const tFill=document.getElementById('t-fill');
tFill.style.strokeDasharray=CIRC;
tFill.style.strokeDashoffset=0;

const RH=62,CIRCH=2*Math.PI*RH;
const hFill=document.getElementById('h-fill');
const hSvg=document.getElementById('hold-svg');
hFill.style.strokeDasharray=CIRCH;
hFill.style.strokeDashoffset=CIRCH;

const tickSvg=document.getElementById('tick-svg');
for(let i=0;i<60;i++){
  const a=(i/60)*Math.PI*2-Math.PI/2,major=i%5===0,ro=116,ri=major?104:110;
  const l=document.createElementNS('http://www.w3.org/2000/svg','line');
  l.setAttribute('x1',125+ro*Math.cos(a));l.setAttribute('y1',125+ro*Math.sin(a));
  l.setAttribute('x2',125+ri*Math.cos(a));l.setAttribute('y2',125+ri*Math.sin(a));
  l.setAttribute('stroke',major?'rgba(255,255,255,.2)':'rgba(255,255,255,.06)');
  l.setAttribute('stroke-width',major?'2':'1');tickSvg.appendChild(l);
}

const bgMusic=document.getElementById('bg-music');
const musicToggle=document.getElementById('music-toggle');
let muted=false;bgMusic.volume=0.6;

musicToggle.addEventListener('click',()=>{
  muted=!muted;bgMusic.volume=muted?0:0.6;
  musicToggle.textContent=muted?'üîá':'üîä';
  musicToggle.classList.toggle('muted',muted);
});

function startMusic(){
  if(bgMusic.paused){bgMusic.play().catch(e=>console.log('Audio play failed:',e));}
}
document.addEventListener('click',startMusic,{once:true});
document.addEventListener('touchstart',startMusic,{once:true});

let AC=null,sfxGain=null;
function initAC(){
  if(AC)return;
  AC=new(window.AudioContext||window.webkitAudioContext)();
  sfxGain=AC.createGain();sfxGain.gain.value=0.65;sfxGain.connect(AC.destination);
}

function sfxClick(){
  if(!AC)return;const o=AC.createOscillator(),e=AC.createGain();o.type='sine';
  o.frequency.setValueAtTime(900,AC.currentTime);o.frequency.exponentialRampToValueAtTime(440,AC.currentTime+.09);
  e.gain.setValueAtTime(0,AC.currentTime);e.gain.linearRampToValueAtTime(.6,AC.currentTime+.005);
  e.gain.exponentialRampToValueAtTime(.001,AC.currentTime+.13);o.connect(e);e.connect(sfxGain);
  o.start(AC.currentTime);o.stop(AC.currentTime+.15);
}

function sfxSuccess(){
  if(!AC)return;[523.3,659.3,783.9,1046.5].forEach((f,i)=>{
    const o=AC.createOscillator(),e=AC.createGain();o.type='triangle';o.frequency.value=f;
    e.gain.setValueAtTime(0,AC.currentTime+i*.07);e.gain.linearRampToValueAtTime(.4,AC.currentTime+i*.07+.01);
    e.gain.exponentialRampToValueAtTime(.001,AC.currentTime+i*.07+.22);o.connect(e);e.connect(sfxGain);
    o.start(AC.currentTime+i*.07);o.stop(AC.currentTime+i*.07+.28);
  });
}

function sfxFail(){
  if(!AC)return;[400,300,180].forEach((f,i)=>{
    const o=AC.createOscillator(),e=AC.createGain();o.type='sawtooth';o.frequency.value=f;
    e.gain.setValueAtTime(0,AC.currentTime+i*.1);e.gain.linearRampToValueAtTime(.35,AC.currentTime+i*.1+.01);
    e.gain.exponentialRampToValueAtTime(.001,AC.currentTime+i*.1+.18);o.connect(e);e.connect(sfxGain);
    o.start(AC.currentTime+i*.1);o.stop(AC.currentTime+i*.1+.22);
  });
}

function sfxCountdown(){
  if(!AC)return;const o=AC.createOscillator(),e=AC.createGain();o.type='sine';o.frequency.value=700;
  e.gain.setValueAtTime(.3,AC.currentTime);e.gain.exponentialRampToValueAtTime(.001,AC.currentTime+.08);
  o.connect(e);e.connect(sfxGain);o.start(AC.currentTime);o.stop(AC.currentTime+.1);
}

function sfxWin(){
  if(!AC)return;[523.3,659.3,783.9,1046.5,1318.5,1046.5,1318.5,1568].forEach((f,i)=>{
    const o=AC.createOscillator(),e=AC.createGain();o.type='triangle';o.frequency.value=f;
    e.gain.setValueAtTime(0,AC.currentTime+i*.09);e.gain.linearRampToValueAtTime(.45,AC.currentTime+i*.09+.01);
    e.gain.exponentialRampToValueAtTime(.001,AC.currentTime+i*.09+.3);o.connect(e);e.connect(sfxGain);
    o.start(AC.currentTime+i*.09);o.stop(AC.currentTime+i*.09+.38);
  });
}

const startScreen=document.getElementById('start-screen');
const startBtn=document.getElementById('start-btn');
startBtn.addEventListener('click',()=>{initAC();startMusic();startScreen.classList.add('hidden');setTimeout(()=>{startScreen.style.display='none'},650);});

let M={inv:false,fast:false,blind:false};
const LVL=[
  {txt:"PRESS THE BUTTON",sub:"Let's begin. Simple.",t:"click",s:9},
  {txt:"PRESS IF YOU LIKE BOURAK",sub:"Once more.",t:"click",s:8},
  {txt:"DO NOT PRESS IF YOU READ Bastila",sub:"Sorry bastila.",t:"wait",s:8},
  {txt:"BOURAK",sub:"Vive Bourak",t:"click",s:8},
  {txt:"DO NOT PRESS",sub:"ÿßÿ≥ÿ™ÿ∫ŸÅÿ± ÿ¥ŸàŸäÿ© ÿ£ ÿµÿßÿ≠ÿ®Ÿä.",t:"wait",s:6},
  {txt:"DOUBLE CLICK",sub:"Two rapid taps in quick succession.",t:"double",s:7},
  {txt:"PRESS 3 TIMES",sub:"Like the number of bourakat you are going to eat.",t:"clickN",p:3,s:8},
  {txt:"HOLD THE BUTTON",sub:"Hold for 2 seconds, then release.",t:"hold",p:2,s:7},
  {txt:"BASTILA",sub:"ÿßÿµÿ®ÿ± ÿπŸÑŸâ ÿ±ÿ≤ŸÇŸÉ.",t:"wait",s:5},
  {txt:"PRESS 5 TIMES",sub:"5 ÿ®Ÿàÿ±ÿßŸÉÿßÿ™ ÿ¥ŸàŸäÿ© ÿ®ÿ≤ÿßŸÅ ÿπŸÑŸäŸÉ.",t:"clickN",p:5,s:9},
  {txt:"DO NOT PRESS",sub:"ŸÑÿß ÿ™ÿ´ŸÇ ÿ®ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑŸÇÿßÿØŸÖ",t:"wait",s:5,onS(){M.inv=true}},
  {txt:"PRESS THE BUTTON",sub:"‚ö† Inverted ‚Äî this means DO NOT press.",t:"wait",s:5},
  {txt:"DON'T TOUCH IT",sub:"Inversion active. Don't be fooled.",t:"wait",s:4},
  {txt:"DO NOT PRESS",sub:"Still inverted. Stay calm.",t:"wait",s:4},
  {txt:"HOLD THE BUTTON",sub:"Inverted: hold = don't hold. Wait it out.",t:"wait",s:5,onS(){M.inv=false}},
  {txt:"PRESS THE BUTTON",sub:"ÿ≤ÿßŸÑÿ™ ÿßŸÑŸÑÿπŸÜÿ©. Normal rules again.",t:"click",s:7},
  {txt:"PRESS 7 TIMES",sub:"Lucky seven. Go.",t:"clickN",p:7,s:9},
  {txt:"DO NOT PRESS",sub:"After this, the clock runs at double speed.",t:"wait",s:5,onS(){M.fast=true}},
  {txt:"PRESS THE BUTTON",sub:"‚ö° Timer is now 2√ó faster. Move.",t:"click",s:6},
  {txt:"DOUBLE CLICK",sub:"Fast fingers. Double speed active.",t:"double",s:5},
  {txt:"HOLD THE BUTTON",sub:"Hold 2 seconds. The clock is racing.",t:"hold",p:2,s:8},
  {txt:"PRESS 4 TIMES",sub:"Four clicks before the void claims you.",t:"clickN",p:4,s:6},
  {txt:"BASTILA",sub:"The timer will vanish after this.",t:"wait",s:4,onS(){M.blind=true}},
  {txt:"PRESS THE BUTTON",sub:"üåë Timer hidden. Trust your gut.",t:"click",s:7},
  {txt:"DOUBLE CLICK",sub:"Blind. Double-click. No safety net.",t:"double",s:6},
  {txt:"HOLD THE BUTTON",sub:"Hold 2 seconds. Count it in your mind.",t:"hold",p:2,s:7},
  {txt:"PRESS 3 TIMES",sub:"1 2 3 viva l'algerie",t:"clickN",p:3,s:7},
  {txt:"DO NOT PRESS",sub:"Sight returns. But inversion is back.",t:"wait",s:4,onL(){M.blind=false},onS(){M.inv=true}},
  {txt:"PRESS THE BUTTON",sub:"Inverted + 2√ó speed. You know the rules.",t:"wait",s:4},
  {txt:"PRESS 6 TIMES",sub:"Inversion dropped. Six real presses.",t:"clickN",p:6,s:7,onL(){M.inv=false}},
  {txt:"HOLD THE BUTTON",sub:"Hold 3 seconds. The end is near.",t:"hold",p:3,s:9},
  {txt:"PRESS THE BUTTON",sub:"The final press. ÿµÿ≠ÿß ÿ±ŸÖÿ∂ÿßŸÜŸÉ.",t:"click",s:5,onL(){M.inv=false;M.fast=false;M.blind=false}},
];

const btnEl=document.getElementById('btn'),btnLbl=document.getElementById('btn-lbl'),instrEl=document.getElementById('instr-text'),
      subEl=document.getElementById('instr-sub'),statusEl=document.getElementById('status'),icNumEl=document.getElementById('ic-num'),
      modsEl=document.getElementById('mods'),cntEl=document.getElementById('click-cnt'),veilEl=document.getElementById('blind-veil'),
      tNumEl=document.getElementById('t-num'),arenaEl=document.getElementById('arena'),dotsRow=document.getElementById('dots-row'),
      overlay=document.getElementById('overlay'),ovCard=document.getElementById('ov-card'),ovEye=document.getElementById('ov-eye'),
      ovTitle=document.getElementById('ov-title'),ovReason=document.getElementById('ov-reason'),ovScore=document.getElementById('ov-score'),
      ovBtn=document.getElementById('ov-btn');

let cur=0,done=false,failed=false,raf=null,tStart=null,tDur=0,tOn=false,clicks=0,holdT=null,holdRaf=null,lastClk=0,dcTmr=null,dots=[],prevFrac=1;

function buildDots(){dotsRow.innerHTML='';dots=[];for(let i=0;i<LVL.length;i++){const d=document.createElement('div');d.className='dot fut';dotsRow.appendChild(d);dots.push(d);}}
function refreshDots(){dots.forEach((d,i)=>{d.className='dot '+(i<cur?'done':i===cur?'cur':'fut');});}

function startTimer(s){tOn=true;tStart=performance.now();tDur=s*1000;prevFrac=1;tickLoop();}
function stopTimer(){tOn=false;if(raf)cancelAnimationFrame(raf);}

function tickLoop(){
  if(!tOn)return;const spd=M.fast?2:1,left=Math.max(0,tDur-(performance.now()-tStart)*spd),frac=left/tDur;
  tFill.style.strokeDashoffset=CIRC*(1-frac);
  arenaEl.classList.remove('warn-state','danger-state');
  if(frac<.15)arenaEl.classList.add('danger-state');else if(frac<.35)arenaEl.classList.add('warn-state');
  if(M.blind){tNumEl.style.opacity='0';}else{tNumEl.style.opacity='1';tNumEl.textContent=(left/1000).toFixed(1)+'s';}
  const secL=Math.ceil(left/1000),prevSecL=Math.ceil(prevFrac*tDur/1000);
  if(secL<=3&&secL<prevSecL&&secL>0&&!M.blind)sfxCountdown();prevFrac=frac;
  if(left<=0){tOn=false;onTimeUp();return;}raf=requestAnimationFrame(tickLoop);
}

function onTimeUp(){if(done||failed)return;if(LVL[cur].t==='wait')success();else fail("TOO SLOW");}

function loadLevel(i){
  if(i>=LVL.length){showWin();return;}
  done=false;failed=false;clicks=0;holdT=null;
  if(raf)cancelAnimationFrame(raf);if(holdRaf)cancelAnimationFrame(holdRaf);
  hSvg.classList.remove('vis');hFill.style.strokeDashoffset=CIRCH;arenaEl.classList.remove('warn-state','danger-state');
  const lv=LVL[i];if(lv.onL)lv.onL();
  instrEl.classList.add('out');subEl.style.opacity='0';
  setTimeout(()=>{instrEl.textContent=lv.txt;subEl.textContent=lv.sub||'';instrEl.classList.remove('out');subEl.style.opacity='1';
    icNumEl.style.transform='scale(1.4)';setTimeout(()=>icNumEl.style.transform='scale(1)',200);},160);
  icNumEl.textContent=i+1;refreshDots();refreshMods();veilEl.classList.toggle('on',M.blind);
  cntEl.textContent=lv.t==='clickN'?`0 / ${lv.p}`:'';statusEl.textContent='';statusEl.className='';
  const lmap={click:'PRESS',wait:M.inv?"PRESS":"DON'T",double:'√ó 2',hold:'HOLD',clickN:`√ó ${lv.p}`};
  btnLbl.textContent=lmap[lv.t]||'PRESS';btnEl.className=M.inv?'inv':'';btnEl.disabled=false;
  tFill.style.stroke='url(#tGrad)';tFill.style.filter='drop-shadow(0 0 6px rgba(0,245,255,.7))';
  tFill.style.strokeDashoffset=CIRC;tNumEl.textContent='‚Äî';tNumEl.style.opacity='1';
  setTimeout(()=>startTimer(lv.s),80);
}

function refreshMods(){modsEl.innerHTML='';if(M.inv)modsEl.innerHTML+='<span class="mpill m-inv">‚äò INVERTED</span>';
  if(M.fast)modsEl.innerHTML+='<span class="mpill m-spd">‚ö° 2√ó SPEED</span>';if(M.blind)modsEl.innerHTML+='<span class="mpill m-bln">‚óâ BLIND</span>';}

function success(){
  if(done||failed)return;done=true;stopTimer();const lv=LVL[cur];if(lv.onS)lv.onS();
  sfxSuccess();dots[cur].className='dot done';btnEl.classList.add('s-ok');spawnSparks(true);
  setTimeout(()=>{btnEl.classList.remove('s-ok');tFill.style.stroke='';tFill.style.filter='';statusEl.className='';statusEl.textContent='';cur++;loadLevel(cur);},320);
}

function fail(reason){
  if(done||failed)return;failed=true;stopTimer();sfxFail();dots[cur].className='dot fail-d';
  btnEl.classList.add('s-fail');showStatus('‚úó  '+reason,'bad');tFill.style.stroke='#ff2d78';tFill.style.filter='drop-shadow(0 0 14px rgba(255,45,120,.9))';
  spawnSparks(false);setTimeout(()=>{btnEl.classList.remove('s-fail');showGameOver(reason);},500);
}

function showStatus(txt,cls){statusEl.textContent=txt;statusEl.className='show '+cls;}

function onPress(){
  if(done||failed)return;initAC();sfxClick();const lv=LVL[cur];
  if(lv.t==='wait'){fail("SHOULDN'T PRESS");return;}
  if(lv.t==='click'){success();}
  else if(lv.t==='double'){const now=Date.now();if(now-lastClk<440){clearTimeout(dcTmr);success();}
    else{dcTmr=setTimeout(()=>{if(!done&&!failed)fail("NEED DOUBLE CLICK");},440);}lastClk=now;}
  else if(lv.t==='clickN'){clicks++;cntEl.textContent=`${clicks} / ${lv.p}`;
    if(clicks===lv.p)success();else if(clicks>lv.p)fail("TOO MANY CLICKS");}
}

function onHoldStart(){
  if(done||failed)return;if(LVL[cur].t!=='hold')return;initAC();holdT=Date.now();
  btnEl.classList.add('holding');hSvg.classList.add('vis');
  (function anim(){if(!holdT)return;const f=Math.min(1,(Date.now()-holdT)/1000/LVL[cur].p);
    hFill.style.strokeDashoffset=CIRCH*(1-f);holdRaf=requestAnimationFrame(anim);})();
}

function onHoldEnd(){
  if(done||failed)return;if(LVL[cur].t!=='hold'||!holdT)return;cancelAnimationFrame(holdRaf);
  const el=(Date.now()-holdT)/1000;holdT=null;btnEl.classList.remove('holding');hSvg.classList.remove('vis');
  hFill.style.strokeDashoffset=CIRCH;if(el>=LVL[cur].p)success();else fail("HELD TOO SHORT");
}

btnEl.addEventListener('mousedown',e=>{e.preventDefault();onPress();onHoldStart();});
btnEl.addEventListener('mouseup',e=>{e.preventDefault();onHoldEnd();});
btnEl.addEventListener('touchstart',e=>{e.preventDefault();onPress();onHoldStart();},{passive:false});
btnEl.addEventListener('touchend',e=>{e.preventDefault();onHoldEnd();},{passive:false});
btnEl.addEventListener('contextmenu',e=>e.preventDefault());

function spawnSparks(win){
  const r=btnEl.getBoundingClientRect(),cx=r.left+r.width/2,cy=r.top+r.height/2,
        cols=win?['#00ff9d','#00f5ff','#ffe94e','#7b2fff','#fff']:['#ff2d78','#ff6040','#ffb800'],n=win?20:10;
  for(let i=0;i<n;i++){
    const s=document.createElement('div');s.className='spark';const sz=win?2+Math.random()*4:2+Math.random()*3;
    s.style.cssText=`width:${sz}px;height:${sz}px;background:${cols[i%cols.length]};left:${cx}px;top:${cy}px;box-shadow:0 0 4px ${cols[i%cols.length]};`;
    const a=(i/n)*Math.PI*2+Math.random()*.6,d=60+Math.random()*110;
    s.style.setProperty('--tx',Math.cos(a)*d+'px');s.style.setProperty('--ty',Math.sin(a)*d+'px');
    s.style.setProperty('--d',(0.4+Math.random()*.55)+'s');document.body.appendChild(s);setTimeout(()=>s.remove(),1000);
  }
}

function triggerCardAnim(){
  ovCard.style.animation='none';requestAnimationFrame(()=>{requestAnimationFrame(()=>{ovCard.style.animation='cardIn .65s cubic-bezier(.34,1.56,.64,1) both';});});
}

function showGameOver(reason){
  overlay.className='show ov-fail';ovEye.textContent='mission failed';ovTitle.textContent='GAME\nOVER';
  ovReason.textContent=reason||'Wrong action.';ovScore.textContent=`reached instruction ${cur+1}`;triggerCardAnim();
}

function showWin(){
  sfxWin();overlay.className='show ov-win';ovEye.textContent='mission complete';ovTitle.textContent='YOU\nWIN';
  ovReason.textContent='Every instruction followed.\nThe button bows to you.';ovScore.textContent='all instructions complete';
  dots.forEach(d=>d.className='dot done');triggerCardAnim();
}

ovBtn.addEventListener('click',()=>{
  M.inv=false;M.fast=false;M.blind=false;cur=0;overlay.className='';buildDots();loadLevel(0);
});

buildDots();loadLevel(0);
</script>
</body>
</html>